{
  "name" : "Custom Payment Reminders for Paid Memberships Pro",
  "slug" : "e20r-payment-warning-pmpro",
  "download_url" : "https://eighty20results.com/protected-content/e20r-payment-warning-pmpro/e20r-payment-warning-pmpro-5.0.zip",
  "version" : "5.0",
  "tested": "5.0",
  "requires": "4.8",
  "author" : "Thomas Sjolshagen @ Eighty / 20 Results by Wicked Strong Chicks, LLC <thomas@eighty20results.com>",
  "author_homepage": "https://eighty20results.com/thomas-sjolshagen",
  "last_updated": "2019-11-20 17:30:00 MDT",
  "homepage": "https://eighty20results.com/wordpress-plugins/e20r-payment-warning-pmpro/",
  "sections" : {
    "description" : "<p>Generates and sends notices to active members for the supported membership plugin. The plugin will notify active members about any upcoming recurring payments, membership expirations and of any upcoming credit card expiration dates so the user can be informed and take action. The plugin receives its data directly from the supported payment gateways. This makes this plugin far more reliable and consistent in actually transmitting warnings/notices to your members.</p><p>Being a more reliable and up-to-date notification system than the standard Recurring Payment Email Reminder add-on for Paid Memberships Pro, the E20R Payment Warning for PMPro plugin will utilize the most recent information generated by the payment gateway itself, rather than rely on disconnected data stored on your local WordPress site. <a href=\"https://eighty20results.com/wordpress/paid-memberships-pro/payment-gateways/\" target=\"_blank\">Note that this plugin, to the best of our knowledge, is PCI-DSS compliant. It does not store payment data locally on your web server (The information used to process Credit Card transactions is <strong>only</strong> stored on the payment gateway itself, not on your site).</a></p>",
    "changelog": "<h3>v4.5</h3><ol><li>BUG FIX: Data updates could loop for a long time (infinite)</li></ol><h3>v4.4.2</h3><ol><li>BUG FIX: Updated Utilities module</li></ol><h3>v4.4.1</h3><ol><li>ENHANCEMENT: Added more Stripe API versions. Currently included 2018-11-08</li></ol><h3>v4.4</h3><ol><li>ENHANCEMENT: Updated text in ccexpiring.html template</li><li>ENHANCEMENT: Add Credit Cart Expiration Message test hook</li><li>BUG FIX: No need to send out credit card expiration warning for non-recurring users</li><li>BUG FIX: Incorrect default message type to process when processing reminders</li><li>BUG FIX: Force values for $target_template and $template_type</li><li>BUG FIX: Didn't trigger error when $target_template or $template_type were empty</li><li>BUG FIX: Searching for email notice type returned too many results</li><li>BUG FIX: Running Reminder message handler incorrectly included too many templates</li><li>BUG FIX: Didn't load test hooks when configured</li></ol><h3>v4.3</h3><ol><li>ENHANCEMENT: Simplify the add-on specific option names and upgrade the database</li><li>ENHANCEMENT: Use new option names for add-ons and simplify add-on configuration</li><li>ENHANCEMENT: Trigger change of add-on option names when loading settings (if applicable)</li><li>ENHANCEMENT: Renamed render_addon_entry() method to render_addon_checkbox()</li><li>ENHANCEMENT: Add label to indicate payment gateway module licensing status when activated</li><li>ENHANCEMENT: No need to double-check when the decision had already been made to send the message</li><li>ENHANCEMENT: Send admin email every 7 days when there are license warnings (expiring or expired license(s))</li><li>ENHANCEMENT: Added PHPDoc blocks for all class variables in Payment_Reminder()</li><li>ENHANCEMENT: Added PHPDoc blocks for load_hooks() method in Payment_Reminder()</li><li>ENHANCEMENT: More debug logging for User_Data::save_to_db() function</li><li>BUG FIX: Load the payment reminder message filters on init (decides whether to send the message, etc)</li><li>BUG FIX: Don't return user_data before processing payment/subscription because email address changed</li><li>BUG FIX: Check and set license status when plugin is being deactivated</li><li>BUG FIX: Didn't check state of license when triggering toggle_addon handler</li><li>BUG FIX: For an add-on to be active, it also needed to be licensed (wrong behavior)</li><li>BUG FIX: For an add-on to have status 'active', it needs to be both active and licensed</li><li>BUG FIX: Didn't always trigger Payment_Reminder::should_send_reminder_message()</li><li>BUG FIX: Didn't trigger the 'e20r-payment-warning-send-email' filter which triggered date check of message(s)</li></ol><h3>v4.2</h3><ol><li>BUG FIX: Didn't check for boolean return from e20r_pw_addon_get_user_payments and e20r_pw_addon_get_user_subscriptions</li><li>BUG FIX: Returned Boolean when should return original User_Data structure</li></ol><h3>v4.1</h3><ol><li>BUG FIX: Make sure the loaded E20R_Background_Process class has the is_queue_good() method</li><li>ENHANCEMENT: Updated warning label for Timeout setting</li><li>ENHANCEMENT: Added Global_Settings::render_select(), creates SELECT HTML element using settings array in add_settings_field() method. Supports the following settings: 'select_options', 'option_default', 'option_label', 'option_default_label', 'option_name'</li><li>ENHANCEMENT: More dynamic Global_Setting::render_textbox() method; New settings available in array for add_settings_field() method. Supports the following settings; 'option_name', 'rows', 'cols', 'placeholder'</li><li>ENHANCEMENT: Added new global setting; data_fetch_timeout = 23 (hours)</li><li>ENHANCEMENT: Applied WP Code Style & reordered Global_Settings() class</li><li>ENHANCEMENT: Added static Fetch_User_Data::should_continue() method</li><li>ENHANCEMENT: Added static Fetch_User_Data::ending_fetch() method</li><li>ENHANCEMENT: Updated PHPDoc Fetch_User_Data::block for get_local_user_data() method</li><li>ENHANCEMENT: Applied WP Code Style to Fetch_User_Data() class</li><li>ENHANCEMENT: Refactored Handle_Payments::task()</li><li>ENHANCEMENT: Refactored Handle_Subscriptions::task()</li><li>ENHANCEMENT: Added timeout handling for background User Data Fetch tasks (Subscriptions and Payments)</li><li>ENHANCEMENT: Add filter to override configured timeout value: `e20r-payment-warning-fetch-timeout` (accepts 1 argument, an integer value for the number of hours the timeout is supposed to last. Can be negative)</li><li>ENHANCEMENT: Add debug setting for the Timeout handler for background jobs: E20R_DEBUG_TIMEOUT (boolean constant). Uses the e20r-payment-warning-fetch-timeout filter to set value to -2 (always timed out)</li></ol><h3>v4.0</h3><ol><li>ENHANCEMENT: Refactored send_message() method</li><li>BUG FIX: Didn't process all activation activities consistently.</li><li>BUG FIX: SQL error when column & index exists prior to upgrade</li><li>BUG FIX: Possible DB error when upgrading table schema for plugin</li><li>BUG FIX: Incorrect namespace for DB_Tables() class</li><li>BUG FIX: DB_Tables() class had incorrect file name for autoloader</li><li>BUG FIX: Would sometimes fail to run due to bad queue data</li><li>BUG FIX: Didn't always find the Email Notices for this plugin to transmit/send</li><li>BUG FIX: Failed to generate a complete message with substitution variables expanded</li><li>BUG FIX: Didn't try to load message body when instantiating Email_Message() class</li><li>BUG FIX: Reminder override (only used to debug) was too strict</li><li>BUG FIX: Couldn't locate templates in some situations</li><li>BUG FIX: Moved message content filters to Email_Message() class</li><li>BUG FIX: payment_date substitution variable was incorrectly defined</li><li>BUG FIX: Numerous updates to Reminder_Editor::configure_cpt_templates() method</li><li>BUG FIX: Didn't load the Payment_Warning templates in a lot of circumstances</li><li>BUG FIX: Didn't process deactivation logic</li><li>BUG FIX: Load the expected module logic in all situations</li><li>BUG FIX: Load modules dependent on licensing</li><li>ENHANCEMENT: Add overrides when E20R_DEBUG_OVERRIDE constant is defined and true</li><li>ENHANCEMENT: Refactored get_gateway_class_name() method in payment gateway modules</li><li>ENHANCEMENT: Allow searching for a template by it's slug value (Reminder_Editor::find_template_by_slug())</li><li>ENHANCEMENT: Special processing for previous_payment_date substitution variable in Reminder_Editor::load_filter_value() method</li><li>ENHANCEMENT: Added previous_payment_date substitution variable (and help)</li><li>ENHANCEMENT: Added cancel_link substitution variable (and help)</li><li>ENHANCEMENT: Added cancel_link_login substitution variable (and help)</li><li>ENHANCEMENT: More efficient processing of substitution variables</li><li>ENHANCEMENT: Specifically handling email message body processing</li><li>ENHANCEMENT: Move DB Table create/remove operation to own class (DB_Tables)</li><li>ENHANCEMENT: Moved DB updates to own DB_Tables() class</li><li>ENHANCEMENT: Enable message transmission override when running in Payment Warning Debug mode</li><li>ENHANCEMENT: More efficient and consistent way of loading gateway modules</li></ol><h3>v3.8.3</h3><ol><li>ENHANCEMENT: Remove unused class instantiation</li><li>ENHANCEMENT: More precise debug logging in Fetch_User_Data class</li><li>ENHANCEMENT: Include the type of sub-handler being processed in the Large_Request_Handler class</li><li>ENHANCEMENT: Add support for version 2018-05-21 of the Stripe API</li><li>ENHANCEMENT: Better debug info for the next_payment_date() module</li><li>ENHANCEMENT: Add bug fixes from the Utilities submodule</li></ol><h3>v3.8.2</h3><ol><li>ENHANCEMENT: Added the 2/28/2018 API version support for Stripe</li></ol><h3>v3.8.1</h3><ol><li>ENHANCEMENT: Updated Utilities infrastructure to prepare for version 4.0 with GDPR support</li></ol><h3>v3.8</h3><ol><li>ENHANCEMENT: Added has_licensed_gateway() method</li><li>ENHANCEMENT: Added a standard gateway module</li><li>ENHANCEMENT: Refactored settings to Global_Settings class</li><li>ENHANCEMENT: Refactored WP Settings page for Payment Warnings to own class (Global_Settings)</li><li>ENHANCEMENT: Made load_options a static function for Global_Settings</li><li>ENHANCEMENT: Refactored membership plugin specific setting handlers</li><li>ENHANCEMENT: Refactored Membership module level settings</li><li>ENHANCEMENT: Fixed PHPDoc blocks for Global_Settings</li><li>ENHANCEMENT: Add new Stripe API versions to list</li><li>ENHANCEMENT: Be more discering about the hooks/filters being when not doing a CRON job or the user isn't logged in</li><li>ENHANCEMENT: Limit activity when not logged in or executing the CRON jobs</li><li>ENHANCEMENT: Only load certain actions if we're exclusively executing a CRON job</li><li>ENHANCEMENT: Only load certain actions if we're exclusively loading the WP backend</li><li>ENHANCEMENT: Updated Utilities module (now includes a custom is_admin() method and stub for Support)</li><li>ENHANCEMENT: Always load the remote webhook/silent post/IPN handler functions for the plugin</li><li>ENHANCEMENT: Removed unneeded DEBUG output</li><li>ENHANCEMENT: Don't load hooks for Reminder Editor unless user is logged in or we're executing a Cron job</li><li>BUG FIX: Fatal error in Payment_Reminder::load_schedule() method</li><li>BUG FIX: Need to load Cron job handlers when in wp-admin</li><li>BUG FIX: Changed all non-static calls to load_options() to Global_Settings::load_options()</li><li>BUG FIX: Attempted to load unneded actions/filters in Global_Settings</li><li>BUG FIX: Didn't use the Global_Settings::load_admin_settings() method for the admin_menu action</li></ol><h3>v3.7</h3><ol><li>ENHANCEMENT: Implemented IPN handler for locally cached PayPal gateway data</li><li>ENHANCEMENT: Added default Credit Card fields for PayPal IPN data</li><li>ENHANCEMENT: Added new Stripe API version (2018-01-23)</li><li>ENHANCEMENT: Only remove records if we're configured to do so</li><li>BUG FIX: Didn't properly complete a license status check & post/send warnings to admin</li><li>BUG FIX: Don't load webhook handler if there isn't one defined for the add-on</li></ol><h3>v3.6</h3><ol><li>ENHANCEMENT/FIX: Disallow accessing Email Notices on front-end of site (as a post/page or an archive)</li><li>ENHANCEMENT: Build debug and release kits for plugin</li></ol><h3>v3.5</h3><ol><li>ENHANCEMENT: Add 'purge records from local DB when stale' option on Payment Warnings settings page</li><li>ENHANCEMENT: Optionally trigger purge operation using 'e20r-payment-warning-clear-old-records' filter with the new setting</li><li>ENHANCEMENT: Add admin configurable purge operation at end of Payments info download job</li><li>ENHANCEMENT: Add admin configurable purge operation at end of Subscription info download job</li><li>ENHANCEMENT: Clarify debug message in Handle_Messages::complete() method</li><li>BUG FIX: Incorrect version number when 'e20rpw_db_version' option isn't set</li></ol><h3>v3.4</h3><ol><li>BUG FIX: Incorrect class type for try/catch operations in Stripe.com gateway add-on</li><li>BUG FIX: Incorrect class type for try/catch operations in Check gateway add-on</li></ol><h3>v3.3</h3><ol><li>ENHANCEMENT: Allow outside party to configure the message types available with the 'e20r-payment-warning-message-types' filter</li><li>ENHANCEMENT: Default option value for the e20r_pw_sent_* options should be array( $today => array())</li><li>ENHANCEMENT: Message type text_value now matches the values from the e20rpw_warning_message_types filter</li><li>ENHANCEMENT: Preserve up to 30 days of message sent to logs (when we sent the message to the specified email address)</li><li>ENHANCEMENT: Added filter to allow configuration of number of days to preserve.</li><li>ENHANCEMENT: Support sending admin notices for user configured message types</li><li>BUG FIX: Message type text_value in Reminder_Editor::define_message_types() didn't match default `e20rpw_warning_message_types` filter values</li><li>BUG FIX: Sent too many admin notices to admin</li></ol><h3>v3.2</h3><ol><li>BUG FIX: Didn't disable the default PMPro expiration warning emails</li></ol><h3>v3.1</h3><ol><li>ENHANCEMENT: Add .editorconfig</li><li>ENHANCEMENT: Remove old Email Editor functionality and replace it with the Email Notice submodule</li><li>ENHANCEMENT: Adding ability to change the action name for the background process</li><li>ENHANCEMENT: Add CreditCard Expiration warning admin message (when applicable)</li><li>ENHANCEMENT: Add data fetch for Credit Card Expiration warnings</li><li>ENHANCEMENT: Added documentation for functions/variables in Large_Request_Handler</li><li>ENHANCEMENT: Process multiple payment gateway data fetch operations at the same time</li><li>ENHANCEMENT: Specify the number of messages sent to each member (warning messages) in the admin notice(s)</li><li>ENHANCEMENT: Add 'load_schedule()' method to support Email Notice submodule</li><li>ENHANCEMENT: Refactored and added PHPDoc modules for all methods</li><li>ENHANCEMENT: Add all methods/capabilities needed to support Email Notice module & deactivate the old Template Editor functionality</li><li>ENHANCEMENT: Allow processing for multiple payment gateways (in Handle_Subscriptions and Handle_Payments classes)</li><li>ENHANCEMENT: Add support for processing payment & subscription data from multiple payment gateways at once in Payment Warning Add-on classes</li><li>ENHANCEMENT: Add support for locking/processing multiple payment gateways at the same time</li><li>ENHANCEMENT: Start using the Email Notice submodule to send/process/create warning messages</li><li>ENHANCEMENT: Allow sending multiple different messages on the same day to the same user</li><li>ENHANCEMENT: Add PHPDoc for all methods in Email_Message class</li><li>ENHANCEMENT: Refactored class.handle-payments.php</li><li>ENHANCEMENT: Refactored class.handle-subscriptions.php</li><li>ENHANCEMENT: Subscription & Payment data collection didn't always work when having multiple active gateways!</li><li>ENHANCEMENT: Update get_handler() method to support multiple different payment gateways and sending different message types.</li><li>ENHANCEMENT: Load licensed modules</li><li>ENHANCEMENT: Make the get_active_addons() method public</li><li>ENHANCEMENT: Add section to let admin set message types to activate/send warnings for in Payment Warning Settings</li><li>ENHANCEMENT: Add handlers for !!saved_cc_info!! and !!billing_address!! substitution variables for Payment Warnings</li><li>ENHANCEMENT: Add get_payment_info() method (generated list of credit card info from payment gateway)</li><li>ENHANCEMENT: Add format_billing_info() method (generates and formats the PMPro billing address on file for a user)</li><li>ENHANCEMENT: Add PHPDoc for some functions/methods</li><li>ENHANCEMENT: Add required implementations for custom_post_column() and set_custom_edit_columns() method (adds message type label in edit.php list for the defined Email Notice).</li><li>ENHANCEMENT: Renamed !!billing_info!! substitution variable to !!billing_address!!</li><li>ENHANCEMENT: Moved handlers for billing_address and saved_cc_info substitution variables to Email_Message class</li><li>ENHANCEMENT: Add PHPDoc blocks for methods in User_Data class</li><li>ENHANCEMENT: Add company_name setting</li><li>ENHANCEMENT: Configure the footer of the email notices using Payment Warning settings & filters</li><li>ENHANCEMENT: Add company_address option to Payment Warnings Settings page</li><li>ENHANCEMENT: Add render_textarea() method for Settings API</li><li>ENHANCEMENT: Including PayPal Merchant API library</li><li>ENHANCEMENT: Removing unused method from Email_Message() class</li><li>ENHANCEMENT: Refactor maybe_extract_class_name() method (now in parent gateway class)</li><li>ENHANCEMENT: Add 'gateway_module' column support to database table</li><li>ENHANCEMENT: Refactor filter/action hook loading to parent class for all add-ons</li><li>ENHANCEMENT: Make gateway name check more fuzzy in verify_gateway_processor() method</li><li>ENHANCEMENT: Make load_webhook_handler() method generic</li><li>ENHANCEMENT: Refactor maybe_extract_class_name() method and move to parent class for all add-ons</li><li>ENHANCEMENT: Improved PHPDoc blocks for methods & variables in E20R_PW_Gateway_Addon class</li><li>ENHANCEMENT: Specify the add-on module being processed in debug messages where it makes sense</li><li>ENHANCEMENT: Renamed from set_active_non_subscription_members() method to get_active_non_subscription_members()</li><li>ENHANCEMENT: Renamed set_active_subscription_members() to get_active_subscription_members()</li><li>ENHANCEMENT: Cache user records by type and payment warning add-on module</li><li>ENHANCEMENT: Added gateway_addon_check() method. Returns true if add-on name and payment gateway module matches</li><li>ENHANCEMENT: Clear all of the per add-on member data caches</li><li>ENHANCEMENT: When running in DEBUG mode, clear the cache for members every time</li><li>ENHANCEMENT: Allow Stripe add-on module to run in parallel with other payment warning add-on modules</li><li>ENHANCEMENT: Assign the type of add-on used to fetch an upstream user record in the local DB</li><li>ENHANCEMENT: Stripe specific get_gateway_class_name() method</li><li>ENHANCEMENT: Moved maybe_extract_class_name() method to parent class</li><li>ENHANCEMENT: Load standard hooks for this gateway in parent class</li><li>ENHANCEMENT: Improved documentation of Stripe_Gateway_Addon class</li><li>ENHANCEMENT: Various minor updates (doc & variable cast) to PayPal_Gateway_Addon class</li><li>ENHANCEMENT: Implement PayPal API calls with the PayPal Merchants API library</li><li>ENHANCEMENT: Add upstream fetch of subscription data for PayPal</li><li>ENHANCEMENT: Add upstream fetch of payment/transaction data for PayPal</li><li>ENHANCEMENT: Convert PayPal transaction timestamps to local (server local) timestamps</li><li>ENHANCEMENT: Add stub for handling relevant PayPal IPN messages</li><li>ENHANCEMENT: Allow admin to configure the PayPal service they use with PMPro</li><li>ENHANCEMENT: Update the Example_Gateway_Addon with expected/required method stubs & documentation</li><li>ENHANCEMENT: Rename Example_Addon to Example_Gateway_Addon to match naming structure of other implemented add-ons</li><li>ENHANCEMENT: Various required updates (required methods etc) for the incomplete Check Payment Gateway add-on</li><li>ENHANCEMENT: Refactor Cron_Handler class</li><li>ENHANCEMENT: Load data from all active and licensed payment gateway modules at once</li><li>ENHANCEMENT: Add @PHPDoc blocks for more variables in User_Data class</li><li>ENHANCEMENT: Add @PHPDoc blocks for more methods in User_Data class</li><li>ENHANCEMENT: Link User_Data class to the add-on being processed</li><li>ENHANCEMENT: Use boolean value to identify whether a local record has been loaded for the User_Data instance</li><li>ENHANCEMENT: Add public has_record_saved() method</li><li>ENHANCEMENT: Updated variable documentation (PHPDoc) for Handle_Subscriptions class</li><li>ENHANCEMENT: Set/get add-on using the Handle_Subscriptions class</li><li>ENHANCEMENT: Updated variable documentation (PHPDoc) for Handle_Payments class</li><li>ENHANCEMENT: Set/get add-on using the Handle_Payments class</li><li>ENHANCEMENT: Limit upstream data fetch operation to the add-on instantiating the Handle_Payments class</li><li>ENHANCEMENT: Add Upgrade() class/methods for new DB version</li><li>ENHANCEMENT: Bump required DB version number to support new table column for add-on type</li><li>ENHANCEMENT: Renamed e20r_pw_addon_add_remote_call_handler action hook to e20r_pw_addon_remote_call_handler</li><li>ENHANCEMENT: Prevent directory listing of logs directory (for Gateway library debug logs)</li><li>ENHANCEMENT: Prevent web server access to *.log files in logs/ directory</li><li>ENHANCEMENT/FIX: Configure Payment_Warning as the module using the Send_Email class</li><li>ENHANCEMENT/FIX: Don't show 'no records found' warning message for inactive add-on modules</li><li>BUG FIX: Didn't load the correct pmpro_save_membership_level action hook</li><li>BUG FIX: Don't trigger add-on check twice in load_addon_settings()</li><li>BUG FIX: Would try to process empty $user_data in task() method for Handle_Payments class</li><li>BUG FIX: Would try to process empty $user_data in task() method for Handle_Subscriptions class</li><li>BUG FIX: Skipped user if there wasn't a pre-existing record in the local DB</li><li>BUG FIX: Didn't exclude records for other payment gateway modules</li><li>BUG FIX: Would sometimes double the records to process in the get_all_user_records() method</li><li>BUG FIX: Only display Payment Warning message types for payment warning messages</li><li>BUG FIX: Don't internationalize date for payment in Stripe_Gateway_Addon class</li><li>BUG FIX: Removed e20r_pw_message_substitution_variables filter</li><li>BUG FIX: Didn't trigger e20r-email-notice-custom-variable-filter handlers for billing address & Credit Card data</li><li>BUG FIX: PHP Warning message in Email_Message class</li><li>BUG FIX: Typo in the !!saved_cc_info!! substitution variable handler</li><li>BUG FIX: Didn't clear the Active Addon cache when saving the Options page</li><li>BUG FIX: Incorrectly assumed the $e20r_pw_addons (array) list always contains the list of active add-ons</li><li>BUG FIX: Would cache an empty list of active add-ons (if they existed)</li><li>BUG FIX: Update get_reminder_type() to handle new Email Notice submodule</li><li>BUG FIX: Didn't use the supplied subscription ID</li><li>BUG FIX: Didn't properly handle fetching data from multiple active payment gateways</li><li>BUG FIX: Didn't dispatch the Payment Reminder queues properly</li><li>BUG FIX: Didn't always load/locate the proper queue handler for messages</li><li>BUG FIX: Didn't send all of the messages in the defined list of messages for that warning type</li><li>BUG FIX: Didn't load Credit Card user data correctly</li><li>BUG FIX: Didn't always process all types of warning messages</li><li>BUG FIX: Used localized date</li><li>BUG FIX: Only include active payment profiles for Credit Card Expiration Warnings</li></ol><h3>v2.0</h3><ol><li>BUG FIX: Update Email Editor sources</li><li>BUG FIX: Refresh Utilities submodule to fix licensing issues</li><li>ENHANCEMENT: Framework for Check Gateway support</li></ol><h3>v1.9.16</h3><ol><li>ENHANCEMENT: Security update</li></ol><h3>v1.9.15</h3><ol><li>ENHANCEMENT: Move E20R_Async_Request class to Utilities submodule</li><li>ENHANCEMENT: Move E20R_Background_Process class to Utilities submodule</li><li>ENHANCEMENT: Remove unused namespaces from Fetch_User_Data class</li><li>ENHANCEMENT: Rename PayPal Gateway add-on module</li><li>ENHANCEMENT: Add OAuth2 Client Secret and Key settings to PayPal add-on settings</li><li>ENHANCEMENT: Move the PayPal REST API SDK library to libraries/</li><li>ENHANCEMENT: Upgraded Utilities submodule to include the Background processing library</li><li>BUG FIX: Didn't include Handle_Messages in move of Background Processing to Utilities module</li><li>BUG FIX: Didn't start the background job when we expected it to</li><li>BUG FIX: Fatal error if unexpected module/class file is present in add-on directory</li><li>BUG FIX: Didn't handle Stripe API errors well</li><li>BUG FIX: Report error if no transaction ID is found for Stripe charge/invoice</li></ol><h3>v1.9.14</h3><ol><li>BUG FIX: Didn't always load active recurring payment member data</li><li>BUG FIX: Didn't load previously recurring membership records that are now expiring</li><li>BUG FIX: Should always set status to 'recurring' in set_active_subscription_members()</li><li>BUG FIX: Handle situations where user has a recurring level and we have to auto-detect</li><li>ENHANCEMENT: Simplified config of non-recurring payment status (always active based on what PMPro believes)</li><li>ENHANCEMENT: Simplified config of status (always active based on what PMPro believes)</li><li>ENHANCEMENT: Reduce debug logging levels</li></ol><h3>v1.9.13</h3><ol><li>BUG FIX: Would sometimes double up on the entry count in the queue</li></ol><h3>v1.9.12</h3><ol><li>ENHANCEMENT/FIX: Clear old temporary data/keys/values from options table</li></ol><h3>v1.9.11</h3><ol><li>REFACTOR: Moved monitoring for background data collection job to fetch_gateway_payment_info action</li><li>BUG FIX: Moved monitoring cron job scheduler to Cron_Handler class</li></ol><h3>v1.9.10</h3><ol><li>ENHANCEMENT: Faster completion of scheduled job checks</li><li>ENHANCEMENT: Also add monitoring if the mutex is set</li><li>BUG FIX: Delay first execution of monitoring action</li></ol><h3>v1.9.9</h3><ol><li>ENHANCEMENT: Add monitoring for background data collection job</li><li>ENHANCEMENT: Clear mutex (lock) options (if they exists) once the background jobs are done/have completed</li><li>ENHANCEMENT: Added Cron schedule for 30 minute repeating check of background data collection status</li></ol><h3>v1.9.8</h3><ol><li>BUG FIX: Didn't trigger remote data update</li><li>ENHANCEMENT: Updated Utilities/Licensing modules</li></ol><h3>v1.9.7</h3><ol><li>ENHANCEMENT: Added array_isnt_empty() function which returns true if the array contains values (can still fail an '! empty()' call)</li><li>ENHANCEMENT: Simplify placeholder text for license input</li><li>BUG FIX: Problems when activating or managing multiple licenses from different plugin entities at the same time.</li><li>BUG FIX: Extra slashes in Subject</li><li>BUG FIX: Support new argument for e20r-license-add-new-licenses filter</li><li>BUG FIX: Would fail to save/activate valid licenses in certain situations</li></ol><h3>v1.9.6</h3><ol><li>BUG FIX: Didn't always appear to clear job from queue on successful save during payment processing</li><li>BUG FIX: Would sometimes double up the times it processed a non-recurring payment record</li><li>BUG FIX: Would load credit cards in an unexpected format causing double-save operations</li><li>BUG FIX: Doubly certain we won't attempt to save the CC info twice</li><li>BUG FIX: Didn't return the correct/a membership level name</li><li>BUG FIX: Didn't use a consistent user_payment_status value ('active')</li><li>BUG FIX: Variable substitution for messages providing incorrect information</li><li>BUG FIX: Would sometimes process same batch twice</li><li>BUG FIX: Queue lock time variable wasn't initialized anywhere</li><li>BUG FIX: Would load too many templates to process messages for</li><li>BUG FIX: Incorrect namespace for Email_Message class action handlers</li><li>ENHANCEMENT: Update debug enabled AJAX handler</li><li>ENHANCEMENT: Load data from local DB, _not_ upstream, when processing messages</li><li>ENHANCEMENT: Using new names for configure_remote_subscription_data_fetch() and configure_remote_payment_data_fetch() in Cron_Handler</li><li>ENHANCEMENT: Renamed get_remote_subscription_data() to configure_remote_subscription_data_fetch()</li><li>ENHANCEMENT: Renamed get_remote_payment_data() to configure_remote_payment_data_fetch()</li><li>ENHANCEMENT: Set cache timeout for active nonrecurring subscription data to 12 hours</li><li>ENHANCEMENT: Set cache duration to 12 hours for active_subscr_users</li><li>ENHANCEMENT: Set cache duration to 12 hours for all_active_users</li><li>ENHANCEMENT: Set cache duration to last 4 hours for current_{$type} (type specific) current records</li><li>ENHANCEMENT: Use local DB lookup (e20rpw_user_info table) for reminder/expiration notices</li><li>ENHANCEMENT: Refactor and move clear_queue() to parent class (E20R_Background_Process)</li><li>ENHANCEMENT: Refreshed Utilities tools/classes</li><li>ENHANCEMENT: Added fixes and updates from EWWW Image Optimizer code to background processing classes</li><li>ENHANCEMENT: Clear the message queue for the messages background handler</li><li>ENHANCEMENT: Refactor and move clear_queue() to parent class (E20R_Background_Process)</li><li>ENHANCEMENT: Transitioning to Utlities submodule (github) and License/Client_License classes for addon gateways</li><li>ENHANCEMENT: More descriptive placeholder for new license input</li><li>ENHANCEMENT: Uses static Email_Message::default_variable_help() function</li><li>ENHANCEMENT: Add PHPDoc for add_placeholder_variables()</li><li>ENHANCEMENT: Renamed get_remote_subscription_data() to configure_remote_subscription_data_fetch()</li><li>ENHANCEMENT: Renamed get_remote_payment_data() to configure_remote_payment_data_fetch()</li><li>ENHANCEMENT: Use configured date format for membership end date in email notices</li><li>ENHANCEMENT: Apply variable substitution via filter for template(s)/message type(s)</li><li>ENHANCEMENT: Made replace_variable_text() function static & a filter hook</li><li>ENHANCEMENT: Added e20rpw_variable_help filter to result of default_variable_help()</li><li>ENHANCEMENT: Add get_active_queue() method</li><li>ENHANCEMENT: Account for differences between single site & multisite columns in DB</li><li>ENHANCEMENT: Add error checking for unlock_process()</li><li>ENHANCEMENT: Add clear_queue() to core (parent) function</li></ol><h3>v1.9.5</h3><ol><li>BUG FIX: Only load active and non-recurring billing members</li><li>BUG FIX: Load all recurring payment records that are active (and w/o enddate) or have an enddate in the futur</li></ol><h3>v1.9.4</h3><ol><li>BUG FIX: Use appropriate autoload value for update_option()</li><li>BUG FIX: Didn't update the e20r_pw_next_gateway_check option value</li><li>BUG FIX: Return record list from set_active_subscription_members()</li><li>BUG FIX: Return record list from set_all_active_members()</li><li>BUG FIX: Would return whatever records were previously loaded if incorrect type was given</li><li>BUG FIX: Prevented from saving end of membership date due to typo in variable name</li><li>BUG FIX: Typo in reminder_type supplied for non-recurring memberships</li><li>BUG FIX: Didn't force the reminder type (recurring) for the user data when processing</li><li>BUG FIX: Didn't force the reminder type (expiration) for the user data when processing</li><li>BUG FIX: Returned boolean value when looking for email address for recipients of message(s)</li><li>ENHANCEMENT: Added error checking in get_remote_payment_data() for get_all_user_records() return values</li><li>ENHANCEMENT: No longer declaring the type of data to save (recurring/payment)</li><li>ENHANCEMENT: No longer need to specify type of record being saved in save_to_db()</li><li>ENHANCEMENT: Preventing get_remote_subscription_data() from running more than once at a time</li><li>ENHANCEMENT: Preventing get_remote_payment_data() from running more than once at a time</li><li>ENHANCEMENT: Remove subscription data fetch lock w/error checking & messages to dashboard</li><li>ENHANCEMENT: Remove non-recurring payment data fetch lock w/error checking & messages to dashboard</li></ol><h3>v1.9.3</h3><ol><li>BUG FIX: Didn't update the version number for the DB after successfully upgraded</li><li>ENHANCEMENT: Adding DB v3 update</li></ol><h3>v1.9.2</h3><ol><li>BUG FIX: Didn't use the default method - get_all_user_records() - when loading member/user data</li><li>BUG FIX: Explicitly instantiate User_Data() class for expiration or recurring billing info when loading</li><li>BUG FIX: Didn't always load the required user records in get_all_user_records() method</li><li>BUG FIX: Make default reminder processing option be 'ccexpiration' (Credit Cards) since all other options explicitly set their data type (recurring, expiring)</li><li>BUG FIX: Make default user record type option be 'ccexpiration' (Credit Cards) since all other options explicitly set their data type (recurring, expiring)</li><li>BUG FIX: Didn't always set the level ID we should expect for the member</li><li>BUG FIX: DB uses MySQL date string, got timestamp from membership level setting (seconds since epoch)</li><li>BUG FIX: Didn't set the correct end of (active) membership date for non-recurring members</li><li>BUG FIX: Didn't return error if date is bad or empty in set_end_of_membership_date()</li><li>BUG FIX: Should process default send email action before anything that could modify it</li><li>BUG FIX: Would fail to send notifications for non-recurring members</li><li>BUG FIX: Wouldn't respect skip admin notice setting</li><li>ENHANCEMENT/FIX: Add end of membership date if subscription plan is cancelled</li><li>ENHANCEMENT: Use local membership enddate if no date is supplied to set_end_of_membership_date() method</li><li>ENHANCEMENT: Remove any instance of the charge or subscription record data</li><li>ENHANCEMENT: Force the reminder_type based on whether the membership (for the user) is recurring or not</li><li>ENHANCEMENT: More debug logging and status checks when clearing the background job queue for payment handler</li><li>ENHANCEMENT: Name add_local_order() more appropriately for something only processing subscriptions (add_local_subscription_order())</li></ol><h3>v1.9.1</h3><ol><li>BUG FIX: Didn't use the correct table name when updating the DB</li></ol><h3>v1.9.0</h3><ol><li>BUG FIX: Fixed version numbering for DB tables</li><li>BUG FIX: Namespace fix for Licensing classes</li><li>ENHANCEMENT/FIX: Activation SQL for database table(s)</li><li>ENHANCEMENT/FIX: Update namespace for new Utilities submodule & relocation to Tools NS for Cron & Background job classes</li><li>ENHANCEMENT: Use Utilities as submodule</li><li>ENHANCEMENT: Move cron & background handler code to Tools/</li><li>ENHANCEMENT: Move Email Message handler code to Tools/</li><li>ENHANCEMENT: Move utilities (Utilities & Cache handling) classes to own submodule</li><li>ENHANCEMENT: Add option for info banner on completion of message operation</li><li>ENHANCEMENT: Add database upgrade infrastructure</li><li>ENHANCEMENT: Add Database Upgrade functionality</li><li>ENHANCEMENT: Use licensing/utilities submodule</li></ol><h3>v1.8.9</h3><ol><li>BUG FIX: Didn't send message for users in certain situations</li><li>BUG FIX: PHP Warning message fixed in send_admin_notice() method</li><li>BUG FIX: Didn't return actual value (implicit false actually retuned)</li><li>ENHANCEMENT: Code style improvements</li></ol><h3>v1.8.8</h3><ol><li>BUG FIX: Typo in help text for saved credit card info</li><li>ENHANCEMENT: Don't send email notice to admin if no messages of the type was sent</li><li>ENHANCEMENT: Add filter to let notice to admin get sent if no messages of the type was sent ('e20r-payment-warning-skip-admin-message-if-none-sent')</li></ol><h3>v1.8.6</h3><ol><li>BUG FIX: Didn't check if admin had enabled payment & subscription data download</li></ol><h3>v1.8.5</h3><ol><li>BUG FIX: Didn't run email notice transmission within the first day of activation</li></ol><h3>v1.8.4</h3><ol><li>BUG FIX: Didn't run data collection within the first day of activation</li></ol><h3>v1.8.3</h3><ol><li>BUG FIX: Database table creation failure</li></ol><h3>v1.8.2</h3><ol><li>BUG FIX: Invalid format array caused save errors for user data</li><li>BUG FIX: Didn't save the correct modified timestamp</li><li>BUG FIX: Incorrect column definition for e20rpw_user_info.modified</li><li>BUG FIX: Removed credit card admin notice (for now)</li><li>ENHANCEMENT: Added index for modified timestamp</li></ol><h3>v1.8.1</h3><ol><li>BUG FIX: Didn't render the Fetch from remote Payment Gateways setting</li></ol><h3>v1.8.0</h3><ol><li>BUG FIX: Would trigger upstream gateway data fetch for any message cron job</li><li>ENHANCEMENT/FIX: Synchronize name of Background Processing class constructor variables ($handle)</li><li>ENHANCEMENT/FIX: Only process Payment & Subscription data from remote payment gateways when explicitly permitted</li><li>ENHANCEMENT: Explicit control over background processing handles</li><li>ENHANCEMENT: Remove modified column data (want to use trigger to update timestamp)</li><li>ENHANCEMENT: Added debug to validate type of user record operation (insert or update)</li><li>ENHANCEMENT: Added E20R_DEBUG_OVERRIDE constant to force the gateway download delays in the schedule to be overridden when in WP_DEBUG (define())</li></ol><h3>v1.7.2</h3><ol><li>BUG FIX: Didn't update subscription info in local DB</li></ol><h3>v1.7.1</h3><ol><li>BUG FIX: Didn't save the current timestamp when modifying user's record</li><li>BUG FIX: Didn't use the subscription of charge ID to identify current/pre-exisiting record in DB</li><li>BUG FIX: Use default & ON UPDATE trigger value in DB for modified column</li></ol><h3>v1.7.0</h3><ol><li>BUG FIX: Don't exit if there's no current post ID when loading media</li><li>ENHANCEMENT/FIX: Clean up any weird template settings</li><li>ENHANCEMENT: Added default substitution variables w/help info</li><li>ENHANCEMENT: Add substitution variable help on Template Editor page</li></ol><h3>v1.6.6</h3><ol><li>BUG FIX: Sent duplicate notices to the same user</li></ol><h3>v1.6.5</h3><ol><li>BUG FIX: Didn't extract the correct credit card info for the Payment Details</li></ol><h3>v1.6.4</h3><ol><li>BUG FIX: Didn't always calculate the right number of sent message notifications</li><li>BUG FIX: Didn't send notification email for user</li></ol><h3>v1.6.3</h3><ol><li>BUG FIX: Didn't clear the charge/subscription data</li><li>ENHANCEMENT/FIX: Update record based on subscription or charge ID (not MemberOrder ID)</li><li>ENHANCEMENT: Better debug logging when clearing a scheduled event (on completion)</li><li>ENHANCEMENT: Upgrading Utilities class to v1.9</li><li>ENHANCEMENT: Use a membership agnostic option for fetching membership level specific data</li><li>ENHANCEMENT: Simplify debug output during license check loopback prevention</li></ol><h3>v1.6.2</h3><ol><li>BUG FIX: Cleaned up CSS file for plugin (not used)</li><li>BUG FIX: Didn't let PMPro Webhook actions to trigger for Stripe.com</li><li>BUG FIX: Empty Javascript & Style load caused 404 error in wp-admin backend</li><li>ENHANCEMENT/FIX: Use static constant (plugin_slug)</li><li>ENHANCEMENT: Refactored admin_enqueue_script()</li><li>ENHANCEMENT: Added webhook_handler() method to PayPal Express gateway add-on (stub)</li><li>ENHANCEMENT: Added PHPDoc for webhook_hander method() </li></ol><h3>v1.6.1</h3><ol><li>ENHANCEMENT/FIX: load_webhook_handler() checks that add-on is active before loading the AJAX handler(s)</li><li>ENHANCEMENT: Moved logic for load_webhook_handler() to E20R_PW_Gateway_Addon class</li><li>ENHANCEMENT: Handling most of the heavy lifting for the load_webhook_handler() method in the E20R_PW_Gateway_Addon class (Stripe.com add-on)</li><li>ENHANCEMENT: Handling most of the heavy lifting for the load_webhook_handler() method in the E20R_PW_Gateway_Addon class (PayPal Express add-on)</li><li>ENHANCEMENT: Added 'handler_name' attribute to global add-on settings array ($e20r_pw_addons) for PayPal Express addon</li><li>ENHANCEMENT: Added 'handler_name' attribute to global add-on settings array ($e20r_pw_addons) for Stripe.com addon</li><li>ENHANCEMENT: Added new API version to version array for Stripe.com</li></ol><h3>v1.6</h3><ol><li>BUG FIX: Would sometimes timeout during add-on/gateway activation</li><li>BUG FIX: Didn't consistently save the license status for the add-on being processed</li><li>BUG FIX: Used the wrong stub filter for the PayPal Express Gateway class</li><li>ENHANCEMENT/FIX: An add-on is only active if it's both licenseed and the is_active status (checkbox) is checked</li><li>ENHANCEMENT/FIX: Update licensing class to v1.4 - Includes fixes for invalid product key provided, etc</li><li>ENHANCEMENT/FIX: No longer checking license to enable the Template editor</li><li>ENHANCEMENT/FIX: Renamed the E20R_Stripe_Gateway_Addon class to Stripe_Gateway_Addon</li><li>ENHANCEMENT: Fix filter name: e20r_pw_addon_stripe_gateway_addon_name</li><li>ENHANCEMENT: Use the global settings when checking the status for the Stripe_Gateway_Addon activation logic</li><li>ENHANCEMENT: Simplify restoring values for is_active and active_license in the Stripe_Gateway_Addon config array</li><li>ENHANCEMENT: Rename 'add-ons' to the more descriptive 'Gateways' and fix the descriptive text for the options</li><li>ENHANCEMENT: Remove redundant 'Gateway' from label</li></ol><h3>v1.5.4</h3><ol><li>BUG FIX: DeBUG FIX: Selected the wrong template type for Recurring Payment warning (and credit card expiration warning)</li></ol><h3>v1.5.3</h3><ol><li>BUG FIX: Deactivate PayPal Express completely</li></ol><h3>v1.5.2</h3><ol><li>BUG FIX: Didn't always confirm that jobs were scheduled</li><li>ENHANCEMENT/FIX: Make plugin activation/deactivation functions static</li></ol><h3>v1.5.1</h3><ol><li>BUG FIX: Included escaped text in email body</li><li>BUG FIX: Would sometimes send multiple instances of same message to same user on same day</li><li>BUG FIX: Didn't correctly handle expiration and credit card expiration messages</li><li>BUG FIX: Uses has_active_subscription variable to determine staus for user record</li><li>BUG FIX: Didn't always send reminder message for non-recurring message types</li><li>BUG FIX: Set correct access for class parameters</li><li>BUG FIX: Update action hook handler for e20r_pw_addon_gateway_subscr_statuses filter in stripe gateway class</li><li>ENHANCEMENT/FIX: Incorrect template type for Credit Card Expiration message</li><li>ENHANCEMENT/FIX: Use dedicated template type setting for Credit Card expiration notice</li><li>ENHANCEMENT/FIX: Moved subscription mismatch handler to core gateway handler class</li><li>ENHANCEMENT/FIX: Moved email address mismatch handler to core gateway handler class</li><li>ENHANCEMENT/FIX: Add abstract load_webhook_handler() method to core gateway handler class</li><li>ENHANCEMENT/FIX: Add abstract get_local_customer_id() method to core gateway handler class</li><li>ENHANCEMENT: Load all active members to active_members variable (set_all_active_members() method)</li><li>ENHANCEMENT: Added cache clear for new all_active_members cache</li><li>ENHANCEMENT: No longer stores subscription or charge data in local db tables</li><li>ENHANCEMENT: Remove debug info from logs</li><li>ENHANCEMENT: Renamed should_send_payment_reminder() method to should_send_reminder_message()</li><li>ENHANCEMENT: Move save_subscription_mismatch action handler to core class</li><li>ENHANCEMENT: Rename valid_stripe_subscription_statuses() to valid_gateway_subscription_statuses()</li><li>ENHANCEMENT: Stop saving transaction data to local DB (subscriptions and charges)</li><li>ENHANCEMENT: Only used the subscription ID in the e20r_pw_addon_save_subscription_mismatch action hooks</li><li>ENHANCEMENT: Add initial framework for PayPal Express payment gateway add-on</li><li>ENHANCEMENT: Remove subscription list and charge list from local DB storage</li><li>ENHANCEMENT: Add ccexpiration as a valid reminder type</li><li>ENHANCEMENT: Add libraries directory to build script</li><li>ENHANCEMENT: Minor updates to Example add-on class stub</li><li>ENHANCEMENT: Add REST API library for PayPal/PayPal Express</li></ol><h3>v1.5</h3><ol><li>ENHANCEMENT: Add private next_scheduled() method to calculate the next timestamp for a Cron job in Cron_Handler</li><li>ENHANCEMENT: Use next_scheduled() method to provide timestamp for when Cron jobs start in Cron_Handler</li><li>ENHANCEMENT: Added updated_membership_level() method to Payment_Warning Class</li><li>ENHANCEMENT: Added update_discount_codes() method to Payment_Warning Class</li><li>ENHANCEMENT: Added get_util_cache_key() method to Utilities class</li><li>ENHANCEMENT/FIX: Dropping cache values for Cron schedules after discount code or level updates</li><li>BUG FIX: Displayed extra slash characters in message body</li><li>BUG FIX: Displayed extra slash charaters in message title/subject</li><li>BUG FIX: Didn't update the next scheduled option for the upstream gateway data collection operation</li></ol><h3>v1.4.4</h3><ol><li>BUG FIX: Didn't always identify the right user list for the Subject field</li></ol><h3>v1.4.3</h3><ol><li>BUG FIX: Didn't expand the user list properly for the notification message(s)</li></ol><h3>v1.4.2</h3><ol><li>BUG FIX: Didn't always allow cron job(s) to execute</li></ol><h3>v1.4.1</h3><ol><li>BUG FIX: Typo in e20r_payment_warning_schedule_override filter name</li><li>ENHANCEMENT: Add fetch_remote_info test method & override scheduled run info during DEBUG</li></ol><h3>v1.4</h3><ol><li>BUG FIX: Didn't set translation/language domain on init/startup of plugin</li><li>BUG FIX: Didn't always apply first-run logic on activation of plugin</li><li>BUG FIX: Attempted to run email notice cron jobs on activation</li><li>BUG FIX: Didn't schedule the background cron actions</li><li>BUG FIX: Clear all existing user entries in active_members member variable</li><li>BUG FIX: Would include too many users when loading active non_subscription based members/users</li><li>BUG FIX: Would include too many users when loading active subscription based members/users</li><li>BUG FIX: Didn't dispatch request handler for large number(s) of records to process</li><li>ENHANCEMENT: Reduce memory footprint during load of User_Data class</li><li>ENHANCEMENT: Allow coder to specify whether to load data or not in maybe_load_from_db() method</li><li>ENHANCEMENT: Allow override of recurring membership status (via variable - boolean)</li><li>ENHANCEMENT: Reduced memory footprint in initial load of user records (deferred data load to task hander).</li><li>ENHANCEMENT: Added get_action() method to Handle_Payments and Handle_Subscriptions classes</li><li>ENHANCEMENT: Don't run gateway check immediately on plugin activation</li><li>ENHANCEMENT: Allow override from manual initiation of plugin CRON job(s)</li><li>ENHANCEMENT: Removed unneeded logging</li><li>ENHANCEMENT: Rename get_active_*_members() methods to set_active_*_members()</li><li>ENHANCEMENT: Ignore orders that are made with a different gateway environment (live|sandbox) than the currently configured PMPro Payment Gateway key(s)/settings</li><li>ENHANCEMENT: Setting membership status manually</li><li>ENHANCEMENT: Clean up memory</li><li>ENHANCEMENT: Assign all active user records to active_members variable (avoid duplication)</li><li>ENHANCEMENT: Renamed handler array variable to task_handler</li><li>ENHANCEMENT: Improved debug logging for Subscription handler task() method</li><li>ENHANCEMENT: Added get_action() method</li></ol><h3>v1.3.1</h3><ol><li>BUG FIX: Would sometimes ignore settings for emailing warnings during scheduled events</li><li>BUG FIX: Wouldn't honor the delay frequency (reduce load on server</li><li>BUG FIX: Would stomp it's own large request handling for payments & subscriptions</li><li>ENHANCEMENT: Allow WP Crontrol plugin to manually override data fetch</li><li>ENHANCEMENT: Use different instances of the large request handler for subscriptions and payments</li><li>ENHANCEMENT: Use string identifier for the action name in Large_Request_Handler</li></ol><h3>v1.3</h3><ol><li>ENHANCEMENT: Update copyright notice (year)</li><li>ENHANCEMENT: Improved granularity for error/debug logging</li><li>ENHANCEMENT: Fetch background process handler(s) with Payment_Warnings::get_handler() method</li><li>ENHANCEMENT: Add get_handler() method to return the specified request handler</li><li>ENHANCEMENT: Add private variables for the request handlers to Payment_Warnings class</li><li>ENHANCEMENT: Use Payment_Warnings::get_handler() to fetch message handler</li><li>ENHANCEMENT: More descriptive variable name in constructor for Large_Request_Handler class</li><li>ENHANCEMENT/FIX: Move the required handler instantiations to the main Payment_Warnings class</li><li>ENHANCEMENT/FIX: Move all request based processing (background processing) to main Payment_Warnings class</li><li>BUG FIX: Didn't always handle message sending correctly</li><li>BUG FIX: Clean up schedule handling in E20R_Background_Process class</li><li>BUG FIX: Didn't always dispatch large requests</li></ol><h3>v1.2</h3><ol><li>BUG FIX: Didn't disable the default PMPro actions for expiration warnings, credit card expiration warnings and recurring payment notices if the equivalent functionality is active in this plugin</li><li>ENHANCEMENT: Add placeholder to allow adding PMPro Template Editor messages if present</li></ol><h3>v1.1</h3><ol><li>ENHANCEMENT: Add ability to process large number of users across multiple requests</li><li>ENHANCEMENT: Process at most 250 user data records at a time</li><li>ENHANCEMENT: Add filter to let admin set # of requests to process per dispatch (TODO: Make this a global setting)</li><li>ENHANCEMENT: Only trigger processing for subscriptions (payment warning data) if enabled</li><li>ENHANCEMENT: Use passed background processing handler class from received data in task() method</li><li>ENHANCEMENT: Removed unneeded debug logging from Background Processing class</li><li>ENHANCEMENT: Disable debug/test actions</li><li>ENHANCEMENT: Add readme.md documentation file for Github repo</li><li>ENHANCEMENT: Include readme.md file in build</li><li>BUG FIX: Would display incorrect debug message when plugin was licensed</li><li>BUG FIX: Attempted to save and dispatch background job during data loop in task() method</li><li>BUG FIX: Didn't dispatch large request handler properly (Now class is instantiated during/before `plugins_loaded` action hook to ensure proper execution)</li><li>BUG FIX: Attempted to save and dispatch large request handler data during loop</li><li>BUG FIX: Only process subscription data in get_remote_subscription_data() method</li><li>BUG FIX: Only process payment data in get_remote_payment_data() method</li><li>BUG FIX: Didn't include the amount_from_currency() method for Stripe specific amount formatting</li></ol>",
    "faq": "<h3>Can I configure the plugin? </h3><p>Yes, you can specify your company's billing address, the company name and select the message types to process for as well as the payment gateways to enable data collection for (assuming you have a valid license for it).</p><p>Go to the Payment Warnings settings page. The page can be found by navigating to `/wp-admin/` -> \"Settings\" -> \"Payment Warnings\". The key settings should be listed there.</p><p>There are also a number of filter hooks for a programmer to use that will modify certain details of the plugin configuration.</p><h3>What types of warning messages can this plugin send? </h3><p>There are 3 default warning message types you can configure the plugin to process and send on the Payment Warnings Settings page. These 3 warning message types are:</p><p><ul><li>Expiration,</li><li>Recurring Payment Warning and</li><li>Credit Card Expiration messages.</li></ul></p><h3>How do I change/update the email message templates? </h3><p>All template handling is, as of v3.0 and later, managed as \"Email Notices\".</p><p>Email Notices are a form of WordPress posts and have their own taxonomy, so the 3 default warning message types can be created by going to the \"Email Notices\" menu option in the `/wp-admin/` backend and selecting \"New Email Notice\".</p><p>The plugin creates the \"E20R Payment Warning Notices\" Email Type for you when it's activated, but <strong>there are no predefined message warning templates created for you</strong>.</p><p>For the plugin to send warning messages, it needs to be able to find at least one template for the Reminder Type it is processing. As a result, **you will have to create that message and configure it to be sent on whatever day before the expiration/payment date**. See the \"Message Settings\" metabox on the Edit Email Notice page after you have supplied a title and saved the new message template as a \"E20R Payment Warning Notices\" Email Type.</p><h3>How do I select when (what day) to send the warning </h3><p>After saving a Payment Warning Notice in the Email Notice section, when the message reloads, you'll notice a \"Message Settings\" metabox on the right-hand side of the Email Notice Editor page.</p><p>Here you can add/remove the \"Send on day #\" value(s). There are no limits to the number of days when that specific message can be sent.</p><h3>Can the system send more than 1 message of a given type per day to the same user?</h3><p>Yes, you can configure multiple different message templates of the same Message Type and for the same day.</p><p>Note that all of the configured message types will be sent at around the same time.</p><p>Messages are typically sent between 4:30am and 6am for the timezone your WordPress server is configured for - see the \"Timezone\" setting for WordPress on the \"Settings\" -> \"General\" page. By default, WordPress uses the UTC or GMT timezone. That is, unless you configure it to use something else. We recommend you select a timezone that reflects the majority of your site's audience.</p><h3>How do I insert user specific information in the template?</h3><p>The Email Notices supports the use of a predetermined number of what we call 'substitution variables'. You'll recognize a 'substitution variable' by the fact that it has a leading and trailing pair of '!!' (double bangs). For example: To display the first name of the user in the email greeting, you can use the `!!first_name!!` variable. As the plugin processes the message for that user, it will replace the `!!first_name!!` name with the actual first name of the user (assuming they've provided one).</p><p>Each payment warning message type has its own list of variables you can use, and the \"Substitution Variables\" metabox below the Email Notice editor field will be updated to reflect the supported variables once you select the \"Reminder Type\" and Save/Update the template (as a draft, for instance).</p><h3>Is this plugin PCI-DSS compliant?</h3><p>In short; Yes.</p><p>This plugin does not save the credit card number for any of your members. In accordance with the documentation from the Payment Card Industry association requirements, we're storing the brand of the card plus its last 4 digits (so they can tell which card it is). We also save the expiration month and expiration year so we can identify when to send a Credit Card Expiration Warning when needed.</p><h3>What data does the plugin save (from the payment gateway)? </h3><p>We only fetch data for active members of the site (i.e. their PMPro membership status is \"active\"). Once a member becomes inactive, we delete their data from the local cache.</p><p>For members with recurring billing plans we save;</p><p><ul><li>an identifier for the recurring billing/subscription plan,</li><li>the date when the next payment will be charged,</li><li>the payment status for their most recent payment,</li><li>a status text if the last payment failed,</li><li>the amount charged as the last payment,</li><li>the amount that will be attempted charged for the next payment and</li><li>whether their subscription/recurring billing plan is still active.</li></ul></p><p>For members who's membership was paid with a one-time payment, we save;</p><ul><li>an identifier for the charge/transaction that paid for the membership,</li><li>the amount they paid,</li><li>when they paid it (date) and</li><li>when their membership is scheduled to end (if applicable).</li></ul><h3>How often does the plugin download data from the gateway? </h3><p>It depends on the membership level definitions, and to some extent the discount codes defined for the Membership plugin.</p><p>By default, the plugin attempts to calculate the \"half-life\" of the shortest membership period defined (either as a membership level or in a discount code) and set the schedule for data collection to be once every 1/2 the shortest membership period. For example, if you have a membership level that is defined as a week - 7 day - long membership, the data collection would be scheduled for once every 3 days.</p><p>In the cases where the \"half-life\" of the shortest membership level period is more than 1 week, the plugin will schedule data collection to happen at least once per week.</p>"
    }
}
